<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Antonio Buzzelli">
<meta name="dcterms.date" content="2023-04-02">

<title>Antonio Buzzelli  [ Analytics &amp; Data Science for Businesses ] - 🛒 Using Market Basket Analysis to penetrate an untapped regional market</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title"><b>Antonio Buzzelli</b> <br> [ Analytics &amp; Data Science for Businesses ]</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">Antonio Buzzelli</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/antobzzll" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/antonio-buzzelli/" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <h1 class="title">🛒 Using Market Basket Analysis to penetrate an untapped regional market</h1>
            <p class="subtitle lead">Customer-centric bundle deals with Apriori and association rules</p>
                                <div class="quarto-categories">
                <div class="quarto-category">Online Retail</div>
                <div class="quarto-category">Marketing</div>
                <div class="quarto-category">Market Basket Analysis</div>
                <div class="quarto-category">Python</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Antonio Buzzelli </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 2, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  <div>
    <div class="abstract">
      <div class="abstract-title">Abstract</div>
      Through the analysis of one year of sales data from an e-commerce website, I was able to <strong>identify for the firm a promising market with untapped potential</strong>, and implement a marketing strategy to target it using <strong>bundle deals tailored to the specific preferences of its consumers</strong>.
    </div>
  </div>
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#key-findings-and-achievements" id="toc-key-findings-and-achievements" class="nav-link active" data-scroll-target="#key-findings-and-achievements">Key findings and achievements</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#geographical-sales-analysis" id="toc-geographical-sales-analysis" class="nav-link" data-scroll-target="#geographical-sales-analysis">Geographical sales analysis</a>
  <ul class="collapse">
  <li><a href="#country-level" id="toc-country-level" class="nav-link" data-scroll-target="#country-level">Country level</a></li>
  <li><a href="#national-vs.-international-level" id="toc-national-vs.-international-level" class="nav-link" data-scroll-target="#national-vs.-international-level">National vs.&nbsp;international level</a></li>
  <li><a href="#regional-level" id="toc-regional-level" class="nav-link" data-scroll-target="#regional-level">Regional level</a></li>
  </ul></li>
  <li><a href="#market-basket-analysis-for-the-asian-market" id="toc-market-basket-analysis-for-the-asian-market" class="nav-link" data-scroll-target="#market-basket-analysis-for-the-asian-market">Market basket analysis for the Asian market</a>
  <ul class="collapse">
  <li><a href="#bundle-offers" id="toc-bundle-offers" class="nav-link" data-scroll-target="#bundle-offers">Bundle offers</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-left" id="quarto-document-content">




<section id="key-findings-and-achievements" class="level2">
<h2 class="anchored" data-anchor-id="key-findings-and-achievements">Key findings and achievements</h2>
<blockquote class="blockquote">
<ul>
<li>Even though the majority of the volume of sales is concentrated in the UK, the most performing region in terms of average revenue is Asia. The ANOVA analysis shows that the <strong>mean purchase value in the Asia/Pacific region is consistently and significantly higher</strong> than the mean purchase value in the other regions. We can infer that the Asia/Pacific region is a potentially lucrative market with higher average purchase amounts than the other regions. Therefore, the store may want to consider investing more resources in this region to take advantage of this opportunity to increase volume of sales.</li>
<li>By conducting a <strong>market basket analysis</strong> with a focus on the Asian market, we have identified groups of products that are commonly bought together. This has helped us uncover the specific preferences and purchasing patterns of this region. The firm could use this information to create bundled offers that combine these item sets and boost sales volume in the Asian market, ultimately leading to an increase in revenue.</li>
</ul>
</blockquote>
<hr>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The e-commerce industry has experienced significant growth in recent years, and online sales have become an increasingly important aspect of many businesses. Analyzing sales data can help businesses understand customer behavior and identify trends, which can then be used to improve their overall sales strategies and revenue. In this notebook, we will be analyzing a sales dataset from an e-commerce company to gain insights into their sales patterns and identify profitable opportunities.</p>
<p>Firstly, we will delve into analyzing the regional distribution of sales to evaluate the existence of untapped markets. By assessing the sales data across different regions, we will determine the areas where our products are in high demand and identify potential opportunities for expanding our market presence.</p>
<p>Secondly, we will conduct a market basket analysis to uncover correlations between products and provide recommendations for boosting sales. This will involve examining the patterns of product combinations that are frequently purchased together by customers. By identifying these relationships, we can optimize our marketing strategies to better meet the needs of our customers and ultimately increase revenue.</p>
<div class="cell" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dataframes</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># dataviz</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># from jupyterthemes import jtplot</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># jtplot.style(theme='monokai', context='notebook', grid=False)</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># hypothesis testing</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> ttest_ind</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> f_oneway</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.stats.multicomp <span class="im">import</span> pairwise_tukeyhsd</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># market basket analysis</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> permutations</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mlxtend.preprocessing <span class="im">import</span> TransactionEncoder</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mlxtend.frequent_patterns <span class="im">import</span> apriori, association_rules</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.plotting <span class="im">import</span> parallel_coordinates</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">"ignore"</span>, category<span class="op">=</span><span class="pp">DeprecationWarning</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<p>Let’s begin by taking a look at the data at our disposal. The dataset is composed by the following original variables:</p>
<ul>
<li><strong>TransactionNo</strong> (categorical): a six-digit unique number that defines each transaction. The letter “C” in the code indicates a cancellation.</li>
<li><strong>Date</strong> (numeric): the date when each transaction was generated.</li>
<li><strong>ProductNo</strong> (categorical): a five or six-digit unique character used to identify a specific product.</li>
<li><strong>Product</strong> (categorical): product/item name.</li>
<li><strong>Price</strong> (numeric): the price of each product per unit in pound sterling (£).</li>
<li><strong>Quantity</strong> (numeric): the quantity of each product per transaction. Negative values related to cancelled transactions.</li>
<li><strong>CustomerNo</strong> (categorical): a five-digit unique number that defines each customer.</li>
<li><strong>Country</strong> (categorical): name of the country where the customer resides.</li>
</ul>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-04-02T18:30:35.128988Z&quot;,&quot;start_time&quot;:&quot;2023-04-02T18:30:32.893242Z&quot;}" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'../../data/sales.csv'</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># We perform some operations to validate the type of variable, create an `Amount` column, </span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># and subset the dataframe for an exact year of sales.</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Date'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'Date'</span>])</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">'ProductNo'</span>, <span class="st">'CustomerNo'</span>]] <span class="op">=</span> df[[<span class="st">'ProductNo'</span>, <span class="st">'CustomerNo'</span>]].astype(<span class="st">'object'</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Amount'</span>] <span class="op">=</span> df[<span class="st">'Quantity'</span>] <span class="op">*</span> df[<span class="st">'Price'</span>]</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df[(df[<span class="st">'Date'</span>] <span class="op">&lt;=</span> <span class="st">'2019-11-30'</span>) <span class="op">&amp;</span> (df[<span class="st">'Quantity'</span>] <span class="op">&gt;</span> <span class="dv">0</span>)].copy()</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>display(df.info())</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>display(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 502753 entries, 25361 to 536324
Data columns (total 9 columns):
 #   Column         Non-Null Count   Dtype         
---  ------         --------------   -----         
 0   TransactionNo  502753 non-null  object        
 1   Date           502753 non-null  datetime64[ns]
 2   ProductNo      502753 non-null  object        
 3   ProductName    502753 non-null  object        
 4   Price          502753 non-null  float64       
 5   Quantity       502753 non-null  int64         
 6   CustomerNo     502752 non-null  object        
 7   Country        502753 non-null  object        
 8   Amount         502753 non-null  float64       
dtypes: datetime64[ns](1), float64(2), int64(1), object(5)
memory usage: 38.4+ MB</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>None</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">TransactionNo</th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">ProductNo</th>
<th data-quarto-table-cell-role="th">ProductName</th>
<th data-quarto-table-cell-role="th">Price</th>
<th data-quarto-table-cell-role="th">Quantity</th>
<th data-quarto-table-cell-role="th">CustomerNo</th>
<th data-quarto-table-cell-role="th">Country</th>
<th data-quarto-table-cell-role="th">Amount</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">25361</td>
<td>579522</td>
<td>2019-11-30</td>
<td>84879</td>
<td>Assorted Colour Bird Ornament</td>
<td>6.04</td>
<td>8</td>
<td>14432.0</td>
<td>United Kingdom</td>
<td>48.32</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25362</td>
<td>579522</td>
<td>2019-11-30</td>
<td>82486</td>
<td>3 Drawer Antique White Wood Cabinet</td>
<td>6.04</td>
<td>4</td>
<td>14432.0</td>
<td>United Kingdom</td>
<td>24.16</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25363</td>
<td>579522</td>
<td>2019-11-30</td>
<td>82483</td>
<td>Wood 2 Drawer Cabinet White Finish</td>
<td>6.04</td>
<td>8</td>
<td>14432.0</td>
<td>United Kingdom</td>
<td>48.32</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25364</td>
<td>579522</td>
<td>2019-11-30</td>
<td>23493</td>
<td>Vintage Doily Travel Sewing Kit</td>
<td>6.04</td>
<td>10</td>
<td>14432.0</td>
<td>United Kingdom</td>
<td>60.40</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25365</td>
<td>579522</td>
<td>2019-11-30</td>
<td>23240</td>
<td>Set Of 4 Knick Knack Tins Doily</td>
<td>6.19</td>
<td>6</td>
<td>14432.0</td>
<td>United Kingdom</td>
<td>37.14</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">536320</td>
<td>536585</td>
<td>2018-12-01</td>
<td>37449</td>
<td>Ceramic Cake Stand + Hanging Cakes</td>
<td>20.45</td>
<td>2</td>
<td>17460.0</td>
<td>United Kingdom</td>
<td>40.90</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">536321</td>
<td>536590</td>
<td>2018-12-01</td>
<td>22776</td>
<td>Sweetheart 3 Tier Cake Stand</td>
<td>20.45</td>
<td>1</td>
<td>13065.0</td>
<td>United Kingdom</td>
<td>20.45</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">536322</td>
<td>536590</td>
<td>2018-12-01</td>
<td>22622</td>
<td>Box Of Vintage Alphabet Blocks</td>
<td>20.45</td>
<td>2</td>
<td>13065.0</td>
<td>United Kingdom</td>
<td>40.90</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">536323</td>
<td>536591</td>
<td>2018-12-01</td>
<td>37449</td>
<td>Ceramic Cake Stand + Hanging Cakes</td>
<td>20.45</td>
<td>1</td>
<td>14606.0</td>
<td>United Kingdom</td>
<td>20.45</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">536324</td>
<td>536597</td>
<td>2018-12-01</td>
<td>22220</td>
<td>Cake Stand Lovebird 2 Tier White</td>
<td>20.45</td>
<td>1</td>
<td>18011.0</td>
<td>United Kingdom</td>
<td>20.45</td>
</tr>
</tbody>
</table>

<p>502753 rows × 9 columns</p>
</div>
</div>
</div>
</section>
<section id="geographical-sales-analysis" class="level2">
<h2 class="anchored" data-anchor-id="geographical-sales-analysis">Geographical sales analysis</h2>
<p>When conducting a geographical analysis of sales, it is essential to consider both the average purchase value and sales volume to determine if there are any countries that offer promising opportunities. For instance, a country with a high average purchase value but low sales volume may indicate that it has untapped potential and should be targeted for further penetration. The average purchase value gives an indication of the buying power and willingness of customers to spend money, while sales volume reflects the market demand and potential for growth. A country with a high average purchase value and low sales volume could be a potential opportunity for businesses to capitalize on the untapped market potential by increasing their presence and promoting their products or services more effectively.</p>
<p>The analysis of the geographical spread of sales will be carried out at country level, national vs.&nbsp;international level, and finally regional level.</p>
<section id="country-level" class="level3">
<h3 class="anchored" data-anchor-id="country-level">Country level</h3>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-04-02T18:30:40.824045Z&quot;,&quot;start_time&quot;:&quot;2023-04-02T18:30:33.088723Z&quot;}" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>bycountry <span class="op">=</span> df.groupby(<span class="st">'Country'</span>).agg(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    tot_amount<span class="op">=</span>(<span class="st">'Amount'</span>, <span class="st">'sum'</span>),</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    mean_amount<span class="op">=</span>(<span class="st">'Amount'</span>, <span class="st">'mean'</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>).sort_values(<span class="st">'tot_amount'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># display(bycountry.head())</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">15</span>,<span class="dv">10</span>))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].bar(bycountry.index, bycountry[<span class="st">'tot_amount'</span>])</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].bar(bycountry.sort_values(<span class="st">'mean_amount'</span>, ascending<span class="op">=</span><span class="va">False</span>).index, bycountry.sort_values(<span class="st">'mean_amount'</span>, ascending<span class="op">=</span><span class="va">False</span>)[<span class="st">'mean_amount'</span>])</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>plt.setp(ax, xticks<span class="op">=</span>bycountry.index, xticklabels<span class="op">=</span>bycountry.index)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>plt.setp(ax[<span class="dv">0</span>].get_xticklabels(), rotation<span class="op">=</span><span class="dv">90</span>, ha<span class="op">=</span><span class="st">"center"</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>plt.setp(ax[<span class="dv">1</span>].get_xticklabels(), rotation<span class="op">=</span><span class="dv">90</span>, ha<span class="op">=</span><span class="st">"center"</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_ylabel(<span class="st">"Amount (GBP)"</span>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_ylabel(<span class="st">"Amount (GBP)"</span>)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">"Countries by total amount sold"</span>)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_title(<span class="st">"Countries by average amount sold"</span>)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">"Overview on geographical market spread"</span>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].grid(axis<span class="op">=</span><span class="st">'y'</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].grid(axis<span class="op">=</span><span class="st">'y'</span>)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>plt.subplots_adjust(hspace<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-4-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="national-vs.-international-level" class="level3">
<h3 class="anchored" data-anchor-id="national-vs.-international-level">National vs.&nbsp;international level</h3>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-04-02T18:30:42.180659Z&quot;,&quot;start_time&quot;:&quot;2023-04-02T18:30:33.089242Z&quot;}" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a column to differentiation between national vs. international sales</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'UKvsRoW'</span>] <span class="op">=</span> np.where(df[<span class="st">'Country'</span>] <span class="op">==</span> <span class="st">'United Kingdom'</span>, <span class="st">'UK'</span>, <span class="st">'RoW'</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>byukvsrow <span class="op">=</span> df.groupby(<span class="st">'UKvsRoW'</span>).agg(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    tot_amount<span class="op">=</span>(<span class="st">'Amount'</span>, <span class="st">'sum'</span>),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    mean_amount<span class="op">=</span>(<span class="st">'Amount'</span>, <span class="st">'mean'</span>),</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    n_inv<span class="op">=</span>(<span class="st">'TransactionNo'</span>, <span class="st">'nunique'</span>),</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    quantity<span class="op">=</span>(<span class="st">'Quantity'</span>, <span class="st">'mean'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>).sort_values(<span class="st">'mean_amount'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>display(byukvsrow)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>plt.pie(byukvsrow[<span class="st">'tot_amount'</span>], labels<span class="op">=</span>byukvsrow.index, autopct<span class="op">=</span><span class="st">'</span><span class="sc">%1.1f%%</span><span class="st">'</span>, explode<span class="op">=</span>(<span class="fl">0.1</span>,<span class="dv">0</span>), shadow<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Total revenue by UK vs other countries'</span>)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">tot_amount</th>
<th data-quarto-table-cell-role="th">mean_amount</th>
<th data-quarto-table-cell-role="th">n_inv</th>
<th data-quarto-table-cell-role="th">quantity</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">UKvsRoW</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">RoW</td>
<td>10258462.78</td>
<td>211.383944</td>
<td>1809</td>
<td>18.478900</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">UK</td>
<td>50192562.28</td>
<td>110.502027</td>
<td>17164</td>
<td>9.646163</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-5-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-04-02T18:30:42.475006Z&quot;,&quot;start_time&quot;:&quot;2023-04-02T18:30:33.089420Z&quot;}" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>row_rev <span class="op">=</span> df.loc[df[<span class="st">'UKvsRoW'</span>] <span class="op">==</span> <span class="st">'RoW'</span>, <span class="st">'Amount'</span>]</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>uk_rev <span class="op">=</span> df.loc[df[<span class="st">'UKvsRoW'</span>] <span class="op">==</span> <span class="st">'UK'</span>, <span class="st">'Amount'</span>]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># We perform a two-sample ttest to check for statistically significant difference in average sales between national and international markets</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>ttest_ind(uk_rev, row_rev)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>Ttest_indResult(statistic=-16.7279858606087, pvalue=8.524026769071223e-63)</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Even though the volume of sales of international customers accounts only for the 17.0%, a two-sample <em>ttest</em> demonstrates that the <strong>average revenue generated abroad is significantly higher than the one generated in the UK</strong>. This means that international markets for this business are potentially more lucrative than the national one and need to be exploited more.</p>
</blockquote>
</section>
<section id="regional-level" class="level3">
<h3 class="anchored" data-anchor-id="regional-level">Regional level</h3>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-04-02T18:30:42.613739Z&quot;,&quot;start_time&quot;:&quot;2023-04-02T18:30:33.106391Z&quot;}" data-execution_count="6">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapping regions</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>regions <span class="op">=</span> {<span class="st">'Europe'</span>: [<span class="st">'Sweden'</span>, <span class="st">'Denmark'</span>, <span class="st">'Norway'</span>, <span class="st">'Finland'</span>, <span class="st">'Iceland'</span>, <span class="st">'Netherlands'</span>, <span class="st">'Belgium'</span>, <span class="st">'France'</span>, <span class="st">'Germany'</span>, <span class="st">'Switzerland'</span>, <span class="st">'Austria'</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                      <span class="st">'Italy'</span>, <span class="st">'Spain'</span>, <span class="st">'Greece'</span>, <span class="st">'Portugal'</span>, <span class="st">'Malta'</span>, <span class="st">'Cyprus'</span>, <span class="st">'Czech Republic'</span>, <span class="st">'Lithuania'</span>, <span class="st">'Poland'</span>, <span class="st">'United Kingdom'</span>, <span class="st">'EIRE'</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>                      <span class="st">'Channel Islands'</span>, <span class="st">'European Community'</span>],</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>           <span class="st">'North America'</span>: [<span class="st">'USA'</span>, <span class="st">'Canada'</span>],</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>           <span class="st">'Middle East'</span>: [<span class="st">'Bahrain'</span>, <span class="st">'United Arab Emirates'</span>, <span class="st">'Israel'</span>, <span class="st">'Lebanon'</span>, <span class="st">'Saudi Arabia'</span>],</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>           <span class="st">'Asia Pacific'</span>: [<span class="st">'Japan'</span>, <span class="st">'Australia'</span>, <span class="st">'Singapore'</span>, <span class="st">'Hong Kong'</span>],</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>           <span class="st">'RoW'</span>: [<span class="st">'Brazil'</span>, <span class="st">'RSA'</span>],</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>           <span class="st">'Unspecified'</span>: [<span class="st">'Unspecified'</span>]}</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>country_to_region <span class="op">=</span> {}</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> region, countries <span class="kw">in</span> regions.items():</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> country <span class="kw">in</span> countries:</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>        country_to_region[country] <span class="op">=</span> region</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Region'</span>] <span class="op">=</span> df[<span class="st">'Country'</span>].<span class="bu">map</span>(country_to_region)</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>byregion <span class="op">=</span> df.groupby(<span class="st">'Region'</span>).agg(</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    tot_amount<span class="op">=</span>(<span class="st">'Amount'</span>, <span class="st">'sum'</span>),</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    mean_amount<span class="op">=</span>(<span class="st">'Amount'</span>, <span class="st">'mean'</span>),</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>    n_inv<span class="op">=</span>(<span class="st">'TransactionNo'</span>, <span class="st">'nunique'</span>),</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>    quantity<span class="op">=</span>(<span class="st">'Quantity'</span>, <span class="st">'mean'</span>)</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>).sort_values(<span class="st">'mean_amount'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>display(byregion.sort_values(<span class="st">'mean_amount'</span>, ascending<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>fig, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">15</span>,<span class="dv">5</span>))</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>ax1 <span class="op">=</span> plt.bar(byregion.index, byregion[<span class="st">'mean_amount'</span>])</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Average purchase value by region"</span>)</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Amount (GBP)'</span>)</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Region'</span>)</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">'y'</span>)</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">tot_amount</th>
<th data-quarto-table-cell-role="th">mean_amount</th>
<th data-quarto-table-cell-role="th">n_inv</th>
<th data-quarto-table-cell-role="th">quantity</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Region</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Asia Pacific</td>
<td>1380079.80</td>
<td>590.787586</td>
<td>92</td>
<td>51.083904</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">North America</td>
<td>59633.28</td>
<td>154.891636</td>
<td>11</td>
<td>13.503896</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Middle East</td>
<td>76798.30</td>
<td>154.835282</td>
<td>16</td>
<td>12.661290</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Europe</td>
<td>58892902.53</td>
<td>118.021612</td>
<td>18839</td>
<td>10.308538</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">RoW</td>
<td>8912.10</td>
<td>101.273864</td>
<td>2</td>
<td>8.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Unspecified</td>
<td>32699.05</td>
<td>73.152237</td>
<td>13</td>
<td>6.272931</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-7-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-04-02T18:30:44.456895Z&quot;,&quot;start_time&quot;:&quot;2023-04-02T18:30:33.106638Z&quot;}" data-execution_count="7">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>f_value, p_value <span class="op">=</span> f_oneway(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    df.loc[df[<span class="st">'Region'</span>] <span class="op">==</span> <span class="st">'Asia Pacific'</span>, <span class="st">'Amount'</span>],</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    df.loc[df[<span class="st">'Region'</span>] <span class="op">==</span> <span class="st">'North America'</span>, <span class="st">'Amount'</span>],</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    df.loc[df[<span class="st">'Region'</span>] <span class="op">==</span> <span class="st">'Middle East'</span>, <span class="st">'Amount'</span>],</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    df.loc[df[<span class="st">'Region'</span>] <span class="op">==</span> <span class="st">'Europe'</span>, <span class="st">'Amount'</span>],</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    df.loc[df[<span class="st">'Region'</span>] <span class="op">==</span> <span class="st">'RoW'</span>, <span class="st">'Amount'</span>])</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'ANOVA F-value: </span><span class="sc">{</span>f_value<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'ANOVA p-value: </span><span class="sc">{</span>p_value<span class="sc">:.4f}</span><span class="ss">'</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>tukey_df <span class="op">=</span> df.<span class="bu">filter</span>(items<span class="op">=</span>[<span class="st">'Amount'</span>, <span class="st">'Region'</span>]).dropna()</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pairwise_tukeyhsd(tukey_df[<span class="st">'Amount'</span>], tukey_df[<span class="st">'Region'</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>ANOVA F-value: 81.58
ANOVA p-value: 0.0000
          Multiple Comparison of Means - Tukey HSD, FWER=0.05          
=======================================================================
    group1        group2     meandiff p-adj    lower     upper   reject
-----------------------------------------------------------------------
 Asia Pacific        Europe  -472.766    0.0 -547.3921 -398.1398   True
 Asia Pacific   Middle East -435.9523    0.0  -613.855 -258.0496   True
 Asia Pacific North America -435.8959    0.0 -633.8256 -237.9663   True
 Asia Pacific           RoW -489.5137 0.0048 -880.2663  -98.7612   True
 Asia Pacific   Unspecified -517.6353    0.0 -703.4071 -331.8636   True
       Europe   Middle East   36.8137 0.9872  -124.841  198.4683  False
       Europe North America     36.87 0.9928 -146.5938  220.3338  False
       Europe           RoW  -16.7477    1.0 -400.3757  366.8802  False
       Europe   Unspecified  -44.8694 0.9754 -215.1456  125.4068  False
  Middle East North America    0.0564    1.0 -244.3599  244.4726  False
  Middle East           RoW  -53.5614 0.9991 -469.7954  362.6726  False
  Middle East   Unspecified   -81.683 0.9207 -316.3622  152.9961  False
North America           RoW  -53.6178 0.9992 -478.7971  371.5616  False
North America   Unspecified  -81.7394 0.9386 -331.9414  168.4626  False
          RoW   Unspecified  -28.1216    1.0 -447.7792   391.536  False
-----------------------------------------------------------------------</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>We can observe from both the bar plot and the ANOVA analysis that the <strong>mean purchase value in the Asia/Pacific region is consistently and significantly higher</strong> than the mean purchase value in the other regions. Based on this important information, we can infer that the Asia/Pacific region is a potentially lucrative market with higher average purchase amounts than the other regions. Therefore, the store may want to consider investing more resources in this region to take advantage of this opportunity to increase volume of sales. The business can consider implementing targeted marketing strategies, such as advertising campaigns and promotions, that cater to the preferences and interests of the Asia/Pacific market. Additionally, it can explore expanding its product offerings to meet the specific demands of this region, or enhancing the quality of existing products to meet their higher standards. It may be useful to conduct further research and analysis to gain deeper insights into the preferences and behavior of customers in the Asia/Pacific region, and tailor sales strategies accordingly.</p>
</blockquote>
</section>
</section>
<section id="market-basket-analysis-for-the-asian-market" class="level2">
<h2 class="anchored" data-anchor-id="market-basket-analysis-for-the-asian-market">Market basket analysis for the Asian market</h2>
<p>Market basket analysis, specifically Apriori and association rules, can provide valuable insights into customer behavior and preferences that can be used to develop effective marketing strategies. By analyzing customer purchase patterns and identifying which products are commonly purchased together, businesses can create product bundles and promotions that cater to specific customer segments. For instance, if the analysis reveals that customers who purchase Product A are highly likely to also purchase Product B, the business can create a bundle that includes both products at a discounted price to increase sales.</p>
<p>The Asia/Pacific region has a consistently higher average purchase value than other regions, indicating a potential opportunity to increase sales and revenue in that particular market. By conducting basket analysis on this region, the business can gain further insights into the specific product preferences and purchasing habits of customers in this market. This information can then be used to create targeted marketing strategies, such as promotions and advertising campaigns, that appeal to the unique needs and interests of customers in the Asia/Pacific region.</p>
<p>First, we subset the dataframe to filter for the transactions happened in the Asian market and encode them in binary features (one-hot encoding). Then, with the Apriori algorithm, we group them together according to a minimum support of 0.05 and we filter them according to a minimum confidence level of 1.</p>
<p>The result is a dataframe containing frequently sold itemsets with a set a metrics for market basket analysis. These MBA metrics are commonly used in association rule mining, a data mining technique used to identify relationships and patterns among items in a dataset. Here’s a brief explanation of each metric:</p>
<ul>
<li><p><strong>Antecedent support</strong>: This refers to the proportion of transactions that contain the antecedent (or the “if” part of a rule). It is calculated as the number of transactions containing the antecedent divided by the total number of transactions.</p></li>
<li><p><strong>Consequent support</strong>: This refers to the proportion of transactions that contain the consequent (or the “then” part of a rule). It is calculated as the number of transactions containing the consequent divided by the total number of transactions.</p></li>
<li><p><strong>Support</strong>: This refers to the proportion of transactions that contain both the antecedent and the consequent. It is calculated as the number of transactions containing both the antecedent and the consequent divided by the total number of transactions.</p></li>
<li><p><strong>Confidence</strong>: This measures the strength of the association between the antecedent and the consequent. It is calculated as the support of the antecedent and consequent divided by the support of the antecedent. Confidence can range from 0 to 1, with higher values indicating stronger associations.</p></li>
<li><p><strong>Lift</strong>: This measures the degree to which the presence of the antecedent affects the likelihood of the consequent. It is calculated as the support of the antecedent and consequent divided by the product of the support of the antecedent and the support of the consequent. A lift value greater than 1 indicates a positive association between the antecedent and consequent, while a value less than 1 indicates a negative association.</p></li>
<li><p><strong>Leverage</strong>: This measures the difference between the observed frequency of the antecedent and consequent co-occurring and the frequency expected if they were independent. It is calculated as the support of the antecedent and consequent minus the product of the support of the antecedent and the support of the consequent. A positive leverage value indicates a positive association between the antecedent and consequent, while a negative value indicates a negative association.</p></li>
<li><p><strong>Conviction</strong>: This measures the degree of implication of the rule. It is calculated as the ratio of the support of the antecedent to the complement of the confidence. Conviction can range from 0 to infinity, with higher values indicating stronger implications.</p></li>
</ul>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-04-02T18:31:00.989793Z&quot;,&quot;start_time&quot;:&quot;2023-04-02T18:30:33.170680Z&quot;}" data-tags="[]" data-execution_count="8">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subsetting for Asia/Pacific transactions</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>asian_market <span class="op">=</span> df[df[<span class="st">'Region'</span>] <span class="op">==</span> <span class="st">'Asia Pacific'</span>]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Converting transactions in a list of lists</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>transactions <span class="op">=</span> asian_market.groupby(<span class="st">'TransactionNo'</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">list</span>(x[<span class="st">'ProductName'</span>])).to_list()</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>encoder <span class="op">=</span> TransactionEncoder().fit(transactions)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>onehot <span class="op">=</span> encoder.transform(transactions)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>onehot <span class="op">=</span> pd.DataFrame(onehot, columns<span class="op">=</span>encoder.columns_)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting frequent itemsets with apriori algorythm</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>frequent_itemsets <span class="op">=</span> apriori(onehot,</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>                            min_support <span class="op">=</span> <span class="fl">0.05</span>, </span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>                            max_len <span class="op">=</span> <span class="dv">5</span>, </span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>                            use_colnames <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of itemsets selected by the Apriori algorithm:'</span>, <span class="bu">len</span>(frequent_itemsets))</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Computing association rules for the frequent itemsets, and filtering by confidence == 1</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>rules <span class="op">=</span> association_rules(frequent_itemsets, metric<span class="op">=</span><span class="st">'confidence'</span>, min_threshold<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding number of items in the itemsets</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>rules[<span class="st">'n_antecedents'</span>] <span class="op">=</span> rules[<span class="st">'antecedents'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">len</span>(x))</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>rules[<span class="st">'n_consequents'</span>] <span class="op">=</span> rules[<span class="st">'consequents'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">len</span>(x))</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>rules.sample(<span class="dv">15</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Number of itemsets selected by the Apriori algorithm: 163</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">antecedents</th>
<th data-quarto-table-cell-role="th">consequents</th>
<th data-quarto-table-cell-role="th">antecedent support</th>
<th data-quarto-table-cell-role="th">consequent support</th>
<th data-quarto-table-cell-role="th">support</th>
<th data-quarto-table-cell-role="th">confidence</th>
<th data-quarto-table-cell-role="th">lift</th>
<th data-quarto-table-cell-role="th">leverage</th>
<th data-quarto-table-cell-role="th">conviction</th>
<th data-quarto-table-cell-role="th">n_antecedents</th>
<th data-quarto-table-cell-role="th">n_consequents</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">37</td>
<td>(Roses Regency Teacup And Saucer, Regency Cake...</td>
<td>(Spaceboy Lunch Box)</td>
<td>0.054348</td>
<td>0.108696</td>
<td>0.054348</td>
<td>1.0</td>
<td>9.200000</td>
<td>0.048440</td>
<td>inf</td>
<td>3</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24</td>
<td>(Spaceboy Lunch Box, Roses Regency Teacup And ...</td>
<td>(Dolly Girl Lunch Box)</td>
<td>0.054348</td>
<td>0.097826</td>
<td>0.054348</td>
<td>1.0</td>
<td>10.222222</td>
<td>0.049031</td>
<td>inf</td>
<td>2</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25</td>
<td>(Roses Regency Teacup And Saucer, Dolly Girl L...</td>
<td>(Spaceboy Lunch Box)</td>
<td>0.054348</td>
<td>0.108696</td>
<td>0.054348</td>
<td>1.0</td>
<td>9.200000</td>
<td>0.048440</td>
<td>inf</td>
<td>2</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">36</td>
<td>(Spaceboy Lunch Box, Roses Regency Teacup And ...</td>
<td>(Regency Cakestand 3 Tier)</td>
<td>0.054348</td>
<td>0.086957</td>
<td>0.054348</td>
<td>1.0</td>
<td>11.500000</td>
<td>0.049622</td>
<td>inf</td>
<td>3</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">34</td>
<td>(Spaceboy Lunch Box, Regency Cakestand 3 Tier,...</td>
<td>(Roses Regency Teacup And Saucer)</td>
<td>0.054348</td>
<td>0.097826</td>
<td>0.054348</td>
<td>1.0</td>
<td>10.222222</td>
<td>0.049031</td>
<td>inf</td>
<td>3</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">39</td>
<td>(Spaceboy Lunch Box, Roses Regency Teacup And ...</td>
<td>(Regency Cakestand 3 Tier, Dolly Girl Lunch Box)</td>
<td>0.054348</td>
<td>0.054348</td>
<td>0.054348</td>
<td>1.0</td>
<td>18.400000</td>
<td>0.051394</td>
<td>inf</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>(Blue Polkadot Bowl)</td>
<td>(Pink Polkadot Bowl)</td>
<td>0.054348</td>
<td>0.054348</td>
<td>0.054348</td>
<td>1.0</td>
<td>18.400000</td>
<td>0.051394</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>(Set Of 6 Snack Loaf Baking Cases)</td>
<td>(Set Of 6 Tea Time Baking Cases)</td>
<td>0.054348</td>
<td>0.054348</td>
<td>0.054348</td>
<td>1.0</td>
<td>18.400000</td>
<td>0.051394</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>(Feltcraft Princess Lola Doll)</td>
<td>(Feltcraft Princess Olivia Doll)</td>
<td>0.054348</td>
<td>0.076087</td>
<td>0.054348</td>
<td>1.0</td>
<td>13.142857</td>
<td>0.050213</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>(Blue Happy Birthday Bunting)</td>
<td>(Pink Happy Birthday Bunting)</td>
<td>0.054348</td>
<td>0.076087</td>
<td>0.054348</td>
<td>1.0</td>
<td>13.142857</td>
<td>0.050213</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>(Dolly Girl Lunch Box)</td>
<td>(Spaceboy Lunch Box)</td>
<td>0.097826</td>
<td>0.108696</td>
<td>0.097826</td>
<td>1.0</td>
<td>9.200000</td>
<td>0.087193</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27</td>
<td>(Set 3 Retrospot Tea/Coffee/Sugar, Lunch Bag D...</td>
<td>(Red Spotty Biscuit Tin)</td>
<td>0.054348</td>
<td>0.076087</td>
<td>0.054348</td>
<td>1.0</td>
<td>13.142857</td>
<td>0.050213</td>
<td>inf</td>
<td>2</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">31</td>
<td>(Spaceboy Lunch Box, Regency Cakestand 3 Tier)</td>
<td>(Roses Regency Teacup And Saucer)</td>
<td>0.054348</td>
<td>0.097826</td>
<td>0.054348</td>
<td>1.0</td>
<td>10.222222</td>
<td>0.049031</td>
<td>inf</td>
<td>2</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>(Roses Regency Teacup And Saucer, Regency Cake...</td>
<td>(Dolly Girl Lunch Box)</td>
<td>0.054348</td>
<td>0.097826</td>
<td>0.054348</td>
<td>1.0</td>
<td>10.222222</td>
<td>0.049031</td>
<td>inf</td>
<td>2</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">17</td>
<td>(Dolly Girl Lunch Box, Lunch Bag Dolly Girl De...</td>
<td>(Spaceboy Lunch Box)</td>
<td>0.065217</td>
<td>0.108696</td>
<td>0.065217</td>
<td>1.0</td>
<td>9.200000</td>
<td>0.058129</td>
<td>inf</td>
<td>2</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<blockquote class="blockquote">
<p>Upon examining the frequent itemsets, it becomes evident that most of them consist of identical items that are often purchased together, with only minor variations such as color or pattern. For instance, transactions may include items like Blue Polkadot Bowls and Pink Polkadot Bowls, Dolly Girl Lunch Boxes and Spaceboy Lunch Boxes, or Feltcraft Princess Lola Dolls and Feltcraft Princess Olivia Dolls.</p>
</blockquote>
<section id="bundle-offers" class="level3">
<h3 class="anchored" data-anchor-id="bundle-offers">Bundle offers</h3>
<p>Based on the observation that these items are frequently bought together, <strong>it could be advantageous to offer them as bundles to customers</strong>. The firm could offer convenience and value to customers while potentially increasing sales and revenue. For example, a bundle might include both the Blue Polkadot Bowl and the Pink Polkadot Bowl, or the Dolly Girl Lunch Box and the Spaceboy Lunch Box. This strategy can be an effective way to meet Asian customers needs while boosting profits for the retailer.</p>
<div class="cell" data-tags="[]" data-execution_count="9">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Since we want to create bundle offers for single products, we filter for single items</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>rules <span class="op">=</span> rules[(rules[<span class="st">'n_antecedents'</span>] <span class="op">==</span> <span class="dv">1</span>) <span class="op">&amp;</span> (rules[<span class="st">'n_consequents'</span>] <span class="op">==</span> <span class="dv">1</span>)]</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>display(rules.sort_values(<span class="st">'support'</span>, ascending<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>rules[<span class="st">'antecedent'</span>] <span class="op">=</span> rules[<span class="st">'antecedents'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">list</span>(x)[<span class="dv">0</span>])</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>rules[<span class="st">'consequent'</span>] <span class="op">=</span> rules[<span class="st">'consequents'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">list</span>(x)[<span class="dv">0</span>])</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>rules[<span class="st">'rule'</span>] <span class="op">=</span> rules.index</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>coords <span class="op">=</span> rules[[<span class="st">'antecedent'</span>, <span class="st">'consequent'</span>, <span class="st">'rule'</span>]]</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>parallel_coordinates(coords, <span class="st">'rule'</span>, colormap<span class="op">=</span><span class="st">'ocean'</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Bundle offers for the Asian / Pacific market'</span>)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">antecedents</th>
<th data-quarto-table-cell-role="th">consequents</th>
<th data-quarto-table-cell-role="th">antecedent support</th>
<th data-quarto-table-cell-role="th">consequent support</th>
<th data-quarto-table-cell-role="th">support</th>
<th data-quarto-table-cell-role="th">confidence</th>
<th data-quarto-table-cell-role="th">lift</th>
<th data-quarto-table-cell-role="th">leverage</th>
<th data-quarto-table-cell-role="th">conviction</th>
<th data-quarto-table-cell-role="th">n_antecedents</th>
<th data-quarto-table-cell-role="th">n_consequents</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>(Dolly Girl Lunch Box)</td>
<td>(Spaceboy Lunch Box)</td>
<td>0.097826</td>
<td>0.108696</td>
<td>0.097826</td>
<td>1.0</td>
<td>9.200000</td>
<td>0.087193</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">0</td>
<td>(Alarm Clock Bakelike Red)</td>
<td>(Alarm Clock Bakelike Green)</td>
<td>0.065217</td>
<td>0.065217</td>
<td>0.065217</td>
<td>1.0</td>
<td>15.333333</td>
<td>0.060964</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>(Alarm Clock Bakelike Green)</td>
<td>(Alarm Clock Bakelike Red)</td>
<td>0.065217</td>
<td>0.065217</td>
<td>0.065217</td>
<td>1.0</td>
<td>15.333333</td>
<td>0.060964</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>(Basket Of Toadstools)</td>
<td>(Set 3 Retrospot Tea/Coffee/Sugar)</td>
<td>0.054348</td>
<td>0.076087</td>
<td>0.054348</td>
<td>1.0</td>
<td>13.142857</td>
<td>0.050213</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>(Blue Happy Birthday Bunting)</td>
<td>(Pink Happy Birthday Bunting)</td>
<td>0.054348</td>
<td>0.076087</td>
<td>0.054348</td>
<td>1.0</td>
<td>13.142857</td>
<td>0.050213</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>(Blue Polkadot Bowl)</td>
<td>(Pink Polkadot Bowl)</td>
<td>0.054348</td>
<td>0.054348</td>
<td>0.054348</td>
<td>1.0</td>
<td>18.400000</td>
<td>0.051394</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>(Pink Polkadot Bowl)</td>
<td>(Blue Polkadot Bowl)</td>
<td>0.054348</td>
<td>0.054348</td>
<td>0.054348</td>
<td>1.0</td>
<td>18.400000</td>
<td>0.051394</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>(Fairy Tale Cottage Night Light)</td>
<td>(Red Toadstool Led Night Light)</td>
<td>0.054348</td>
<td>0.119565</td>
<td>0.054348</td>
<td>1.0</td>
<td>8.363636</td>
<td>0.047850</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>(Feltcraft Princess Lola Doll)</td>
<td>(Feltcraft Princess Olivia Doll)</td>
<td>0.054348</td>
<td>0.076087</td>
<td>0.054348</td>
<td>1.0</td>
<td>13.142857</td>
<td>0.050213</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>(Green Regency Teacup And Saucer)</td>
<td>(Roses Regency Teacup And Saucer)</td>
<td>0.054348</td>
<td>0.097826</td>
<td>0.054348</td>
<td>1.0</td>
<td>10.222222</td>
<td>0.049031</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>(Set Of 4 Knick Knack Tins Leaf)</td>
<td>(Set Of 4 Knick Knack Tins Doily)</td>
<td>0.054348</td>
<td>0.076087</td>
<td>0.054348</td>
<td>1.0</td>
<td>13.142857</td>
<td>0.050213</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>(Set Of 6 Tea Time Baking Cases)</td>
<td>(Set Of 6 Snack Loaf Baking Cases)</td>
<td>0.054348</td>
<td>0.054348</td>
<td>0.054348</td>
<td>1.0</td>
<td>18.400000</td>
<td>0.051394</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>(Set Of 6 Snack Loaf Baking Cases)</td>
<td>(Set Of 6 Tea Time Baking Cases)</td>
<td>0.054348</td>
<td>0.054348</td>
<td>0.054348</td>
<td>1.0</td>
<td>18.400000</td>
<td>0.051394</td>
<td>inf</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-10-output-2.png" class="img-fluid"></p>
</div>
</div>
<blockquote class="blockquote">
<p>The parallel coordinates plot visually highlights the bundles that were put together for the Asian market, and that the firm should offer on their e-commerce.</p>
</blockquote>
<p>Offering bundles of products that are already sold together as frequent itemsets can be an effective marketing strategy for several reasons:</p>
<ul>
<li><p>Convenience: Bundling products that are frequently purchased together can provide customers with a convenient and streamlined shopping experience. Instead of having to search for each product individually, customers can purchase them together in a single transaction.</p></li>
<li><p>Value proposition: Bundling products can create a compelling value proposition for customers. By offering a discount or special deal on a bundle of products, customers may be more likely to make a purchase than if they were buying each item individually.</p></li>
<li><p>Increased sales: Bundling can also lead to increased sales by encouraging customers to purchase additional products that they may not have otherwise considered. For example, a customer who only intended to buy coffee may be enticed to buy a bundle that includes coffee, a mug, and a bag of coffee beans.</p></li>
<li><p>Upselling opportunities: Bundling can also provide opportunities for upselling by encouraging customers to purchase a higher-value bundle that includes additional products or features.</p></li>
</ul>
<p>In summary, while some products may already be sold together as frequent itemsets, bundling can provide additional value and convenience for customers, as well as opportunities for increased sales and upselling. By offering bundles, businesses can differentiate themselves from competitors and create a more compelling value proposition for their customers.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>
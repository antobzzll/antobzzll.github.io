{
  "hash": "9ea9f7ba673e6eeb530d994646640d14",
  "result": {
    "markdown": "---\ntitle: \"\\U0001F39F️ Cohort Analysis for Retail Businesses\"\nsubtitle: ''\nabstract: 'By dividing customers into groups based on the time of their first purchase, businesses can compare the performance of different cohorts and identify trends and patterns that may not be visible when analyzing all customers as a single group.'\nauthor: Antonio Buzzelli\ndate: '2023-05-30'\ncode-fold: true\ndraft: true\nfig-width: 10\nfig-height: 5\nfig-dpi: 300\nimage: ../../_freeze/posts/motogp-performance/performance/figure-html/cell-16-output-1.png\ncategories:\n  - Online Retail\n  - Cohort Analysis\n  - Python\n---\n\n# Key findings and achievements\n\n* \n* \n\n---\n\n# Introduction\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nimport numpy as np\nimport pandas as pd\nimport datetime as dt\nimport plotly.express as px\n```\n:::\n\n\n# Data\n\nOur dataset is composed by two-year sales data from an online store based in the UK. We first import the data and provide a glimpse of it.\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\ndf = pd.read_parquet('../../data/concatenated_online_retail_II.parquet')\n\ndf['Customer ID'] = df['Customer ID'].astype(str).str.strip('.0')\ndf['CustomerSince'] = df.groupby('Customer ID')[['InvoiceDate']].transform(min)\ndf['Lifespan'] =  df['InvoiceDate'] - df['CustomerSince']\ndf['Lifespan_M'] = (df['Lifespan'].dt.days / 30.44).astype(int)\ndf['Cohort'] = pd.to_datetime(df['CustomerSince']).dt.to_period('M').dt.to_timestamp()\n\ndf.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Invoice</th>\n      <th>StockCode</th>\n      <th>Description</th>\n      <th>Quantity</th>\n      <th>InvoiceDate</th>\n      <th>Price</th>\n      <th>Customer ID</th>\n      <th>Country</th>\n      <th>Year</th>\n      <th>CustomerSince</th>\n      <th>Lifespan</th>\n      <th>Lifespan_M</th>\n      <th>Cohort</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>489434</td>\n      <td>85048</td>\n      <td>15CM CHRISTMAS GLASS BALL 20 LIGHTS</td>\n      <td>12</td>\n      <td>2009-12-01 07:45:00</td>\n      <td>6.95</td>\n      <td>13085</td>\n      <td>United Kingdom</td>\n      <td>1</td>\n      <td>2009-12-01 07:45:00</td>\n      <td>0 days</td>\n      <td>0</td>\n      <td>2009-12-01</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>489434</td>\n      <td>79323P</td>\n      <td>PINK CHERRY LIGHTS</td>\n      <td>12</td>\n      <td>2009-12-01 07:45:00</td>\n      <td>6.75</td>\n      <td>13085</td>\n      <td>United Kingdom</td>\n      <td>1</td>\n      <td>2009-12-01 07:45:00</td>\n      <td>0 days</td>\n      <td>0</td>\n      <td>2009-12-01</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>489434</td>\n      <td>79323W</td>\n      <td>WHITE CHERRY LIGHTS</td>\n      <td>12</td>\n      <td>2009-12-01 07:45:00</td>\n      <td>6.75</td>\n      <td>13085</td>\n      <td>United Kingdom</td>\n      <td>1</td>\n      <td>2009-12-01 07:45:00</td>\n      <td>0 days</td>\n      <td>0</td>\n      <td>2009-12-01</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>489434</td>\n      <td>22041</td>\n      <td>RECORD FRAME 7\" SINGLE SIZE</td>\n      <td>48</td>\n      <td>2009-12-01 07:45:00</td>\n      <td>2.10</td>\n      <td>13085</td>\n      <td>United Kingdom</td>\n      <td>1</td>\n      <td>2009-12-01 07:45:00</td>\n      <td>0 days</td>\n      <td>0</td>\n      <td>2009-12-01</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>489434</td>\n      <td>21232</td>\n      <td>STRAWBERRY CERAMIC TRINKET BOX</td>\n      <td>24</td>\n      <td>2009-12-01 07:45:00</td>\n      <td>1.25</td>\n      <td>13085</td>\n      <td>United Kingdom</td>\n      <td>1</td>\n      <td>2009-12-01 07:45:00</td>\n      <td>0 days</td>\n      <td>0</td>\n      <td>2009-12-01</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\nprint(\"Percentage of null values:\")\ndf.isnull().sum() / df.shape[0]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nPercentage of null values:\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=7}\n```\nInvoice          0.000000\nStockCode        0.000000\nDescription      0.004105\nQuantity         0.000000\nInvoiceDate      0.000000\nPrice            0.000000\nCustomer ID      0.000000\nCountry          0.000000\nYear             0.000000\nCustomerSince    0.000000\nLifespan         0.000000\nLifespan_M       0.000000\nCohort           0.000000\ndtype: float64\n```\n:::\n:::\n\n\n# Retention\n\nImplementing a cohort analysis is useful for a business to evaluate clients' retention over time.\n\n::: {.cell execution_count=4}\n``` {.python .cell-code}\ngrouped_n = df.groupby(['Cohort', 'Lifespan_M']).agg(n=('Customer ID', 'count')).reset_index()\n# cohorts = grouped_n.reset_index(drop=True).pivot(index='Cohort', columns='Lifespan_M', values='n')\n# retention = cohorts.divide(cohorts.iloc[:, 0], axis=0)\n\nfig = px.density_heatmap(\n    grouped_n, \n    x='Lifespan_M', y='Cohort', z='n',\n    title='Cohort Analysis – Retention',\n    labels={'Lifespan_M': 'Lifespan'})\nfig.show()\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>                            <div id=\"9e6500c1-a314-4ff8-aaf7-9f1f4049380d\" class=\"plotly-graph-div\" style=\"height:525px; width:100%;\"></div>            <script type=\"text/javascript\">                require([\"plotly\"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById(\"9e6500c1-a314-4ff8-aaf7-9f1f4049380d\")) {                    Plotly.newPlot(                        \"9e6500c1-a314-4ff8-aaf7-9f1f4049380d\",                        [{\"coloraxis\":\"coloraxis\",\"histfunc\":\"sum\",\"hovertemplate\":\"Lifespan=%{x}<br>Cohort=%{y}<br>sum of n=%{z}<extra></extra>\",\"name\":\"\",\"x\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,0,1,2,3,4,5,6,7,8,9,10,11,12,13,0,1,2,3,4,5,6,7,8,9,10,11,0,1,2,3,4,5,6,7,8,9,10,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,0,1,2,3,4,5,6,7,0,1,2,3,4,5,6,0,1,2,3,4,0,1,2,3,4,0,1,2,3,0,1,2,0,1,0],\"xaxis\":\"x\",\"xbingroup\":\"x\",\"y\":[\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2009-12-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-01-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-02-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-03-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-04-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-05-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-06-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-07-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-08-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-09-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-10-01T00:00:00\",\"2010-11-01T00:00:00\",\"2010-11-01T00:00:00\",\"2010-11-01T00:00:00\",\"2010-11-01T00:00:00\",\"2010-11-01T00:00:00\",\"2010-11-01T00:00:00\",\"2010-11-01T00:00:00\",\"2010-11-01T00:00:00\",\"2010-11-01T00:00:00\",\"2010-11-01T00:00:00\",\"2010-11-01T00:00:00\",\"2010-11-01T00:00:00\",\"2010-11-01T00:00:00\",\"2010-11-01T00:00:00\",\"2010-12-01T00:00:00\",\"2010-12-01T00:00:00\",\"2010-12-01T00:00:00\",\"2010-12-01T00:00:00\",\"2010-12-01T00:00:00\",\"2010-12-01T00:00:00\",\"2010-12-01T00:00:00\",\"2010-12-01T00:00:00\",\"2010-12-01T00:00:00\",\"2010-12-01T00:00:00\",\"2010-12-01T00:00:00\",\"2010-12-01T00:00:00\",\"2011-01-01T00:00:00\",\"2011-01-01T00:00:00\",\"2011-01-01T00:00:00\",\"2011-01-01T00:00:00\",\"2011-01-01T00:00:00\",\"2011-01-01T00:00:00\",\"2011-01-01T00:00:00\",\"2011-01-01T00:00:00\",\"2011-01-01T00:00:00\",\"2011-01-01T00:00:00\",\"2011-01-01T00:00:00\",\"2011-02-01T00:00:00\",\"2011-02-01T00:00:00\",\"2011-02-01T00:00:00\",\"2011-02-01T00:00:00\",\"2011-02-01T00:00:00\",\"2011-02-01T00:00:00\",\"2011-02-01T00:00:00\",\"2011-02-01T00:00:00\",\"2011-02-01T00:00:00\",\"2011-02-01T00:00:00\",\"2011-03-01T00:00:00\",\"2011-03-01T00:00:00\",\"2011-03-01T00:00:00\",\"2011-03-01T00:00:00\",\"2011-03-01T00:00:00\",\"2011-03-01T00:00:00\",\"2011-03-01T00:00:00\",\"2011-03-01T00:00:00\",\"2011-03-01T00:00:00\",\"2011-03-01T00:00:00\",\"2011-04-01T00:00:00\",\"2011-04-01T00:00:00\",\"2011-04-01T00:00:00\",\"2011-04-01T00:00:00\",\"2011-04-01T00:00:00\",\"2011-04-01T00:00:00\",\"2011-04-01T00:00:00\",\"2011-04-01T00:00:00\",\"2011-04-01T00:00:00\",\"2011-05-01T00:00:00\",\"2011-05-01T00:00:00\",\"2011-05-01T00:00:00\",\"2011-05-01T00:00:00\",\"2011-05-01T00:00:00\",\"2011-05-01T00:00:00\",\"2011-05-01T00:00:00\",\"2011-05-01T00:00:00\",\"2011-06-01T00:00:00\",\"2011-06-01T00:00:00\",\"2011-06-01T00:00:00\",\"2011-06-01T00:00:00\",\"2011-06-01T00:00:00\",\"2011-06-01T00:00:00\",\"2011-06-01T00:00:00\",\"2011-07-01T00:00:00\",\"2011-07-01T00:00:00\",\"2011-07-01T00:00:00\",\"2011-07-01T00:00:00\",\"2011-07-01T00:00:00\",\"2011-08-01T00:00:00\",\"2011-08-01T00:00:00\",\"2011-08-01T00:00:00\",\"2011-08-01T00:00:00\",\"2011-08-01T00:00:00\",\"2011-09-01T00:00:00\",\"2011-09-01T00:00:00\",\"2011-09-01T00:00:00\",\"2011-09-01T00:00:00\",\"2011-10-01T00:00:00\",\"2011-10-01T00:00:00\",\"2011-10-01T00:00:00\",\"2011-11-01T00:00:00\",\"2011-11-01T00:00:00\",\"2011-12-01T00:00:00\"],\"yaxis\":\"y\",\"ybingroup\":\"y\",\"z\":[46655,23017,20069,21650,20582,19790,22284,17118,17690,22936,26414,48031,34008,22825,16426,18662,14904,19360,18534,21547,18800,21896,24867,40657,9687,10559,2923,2886,3268,2833,2316,2397,2502,3830,3324,4053,1456,1823,1988,1872,1969,1809,1986,2081,1900,2749,2807,1507,10630,2103,2927,2196,2315,2159,2269,2751,3462,2693,635,1677,1384,1852,1356,2075,1274,1550,1780,2515,2255,1774,71,12779,2959,3113,2777,2422,2424,3646,4205,3409,977,1484,1931,1895,1748,1846,1744,2422,1686,2754,2918,2317,134,7187,1156,1128,855,1311,1790,2219,1419,512,857,635,991,813,963,904,781,742,1705,1497,1072,13,6926,710,1000,506,1680,1763,1645,452,332,434,892,756,664,696,649,676,1400,998,1022,7,8219,1152,1112,2135,1739,2564,570,603,446,691,908,872,911,908,976,983,1516,1154,97,5447,790,1739,1751,1844,401,711,575,1063,372,693,749,734,649,1022,1405,1225,39,5105,1182,1685,1543,495,454,434,452,612,529,630,690,998,718,1433,625,7,7316,2088,1655,1090,523,880,672,512,528,630,619,1148,1234,1546,698,12835,3727,938,1256,1262,1288,1248,1220,1004,1172,984,2111,2583,1980,135,13141,978,876,660,951,796,897,614,592,835,1242,2909,2167,112,3280,198,87,194,93,116,35,139,55,79,177,413,2340,288,387,410,321,335,195,261,518,908,246,2934,719,612,705,473,421,348,441,445,289,5056,724,1171,803,708,627,954,1437,1246,142,2770,890,369,497,411,652,747,688,98,2572,509,476,509,769,466,756,6,3360,421,580,722,881,679,36,3535,690,1178,1029,1235,3877,2291,3117,971,18,6443,1998,1828,30,9596,2143,69,7078,91,653],\"type\":\"histogram2d\"}],                        {\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Lifespan\"}},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Cohort\"}},\"coloraxis\":{\"colorbar\":{\"title\":{\"text\":\"sum of n\"}},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]},\"legend\":{\"tracegroupgap\":0},\"title\":{\"text\":\"Cohort Analysis \\u2013 Retention\"}},                        {\"responsive\": true}                    ).then(function(){\n                            \nvar gd = document.getElementById('9e6500c1-a314-4ff8-aaf7-9f1f4049380d');\nvar x = new MutationObserver(function (mutations, observer) {{\n        var display = window.getComputedStyle(gd).display;\n        if (!display || display === 'none') {{\n            console.log([gd, 'removed!']);\n            Plotly.purge(gd);\n            observer.disconnect();\n        }}\n}});\n\n// Listen for the removal of the full notebook cells\nvar notebookContainer = gd.closest('#notebook-container');\nif (notebookContainer) {{\n    x.observe(notebookContainer, {childList: true});\n}}\n\n// Listen for the clearing of the current output cell\nvar outputEl = gd.closest('.output');\nif (outputEl) {{\n    x.observe(outputEl, {childList: true});\n}}\n\n                        })                };                });            </script>        </div>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "cohort_analysis_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n<script type=\"text/javascript\">\nwindow.PlotlyConfig = {MathJaxConfig: 'local'};\nif (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: \"STIX-Web\"}});}\nif (typeof require !== 'undefined') {\nrequire.undef(\"plotly\");\nrequirejs.config({\n    paths: {\n        'plotly': ['https://cdn.plot.ly/plotly-2.14.0.min']\n    }\n});\nrequire(['plotly'], function(Plotly) {\n    window._Plotly = Plotly;\n});\n}\n</script>\n\n"
      ]
    }
  }
}